# Worker 自动更新系统

## 🚀 核心功能
- **双版本支持**：正式版（稳定）与测试版（尝鲜）
- **两种更新模式**：
  - 定时自动更新（每日凌晨1点）
  - 手动触发更新（随时可执行）
- **智能版本控制**：
  - 自动跳过低版本更新
  - 测试版模式下优先选择更高版本的正式版

## 🛠️ 使用指南

### 手动更新操作
1. 进入项目的 **Actions** 页面
2. 选择 **Auto Update Worker** 工作流
3. 点击 **Run workflow** 按钮
4. 参数设置：
   - **更新类型**：
     - `正式版`：稳定生产环境使用（默认）
     - `测试版`：体验最新功能
   - **强制更新**：
     - `是`：忽略版本检查直接覆盖
     - `否`：仅更新到更高版本（推荐）

### 自动更新规则
| 模式 | 检查条件 | 强制更新行为 |
|------|----------|--------------|
| 正式版 | 仅正式版 > 当前版本 | 安装最新正式版 |
| 测试版 | 正式版 > 测试版 > 当前版本 | 安装最新测试版 |

## ⚡ 高级功能
### 版本锁定机制
1. 修改 `自动更新类型.txt` 内容可永久切换更新类型
2. `version.txt` 记录当前版本信息和更新时间
3. 受保护文件（更新时不会被删除）：
   - `README.md`
   - `自动更新类型.txt`
   - `version.txt`

### 强制更新场景
- 降级到旧版本
- 重新安装当前版本
- 跳过版本验证流程

## 📚 常见问题
<details>
<summary>Q: 如何查看当前版本？</summary>
检查项目根目录下的 <code>version.txt</code> 文件，包含：
- 当前版本号
- 版本类型
- 更新时间
</details>

<details>
<summary>Q: 为什么自动更新没有执行？</summary>
可能原因：
1. 当前已是最新版本
2. 网络请求失败
3. 定时任务未到执行时间
4. 目标版本没有 worker.zip 资源
</details>

<details>
<summary>Q: 测试版会更新到正式版吗？</summary>
当同时满足：
1. 当前为测试版模式
2. 存在更高版本的正式版
系统将自动升级到正式版
</details>

## 📜 版本记录规范
```plaintext
当前版本: v2.1.0
版本类型: 正式版
更新时间: 2023-06-15 09:00:00
更新方式: 自动更新
```
